# PubMed MCP Setup Guide

## Overview
The PubMed MCP server provides direct access to PubMed's extensive biomedical literature database, enabling real-time literature searches, PMID verification, and citation management directly within Claude Code.

## Installation

### Step 1: Install the PubMed MCP Server
```bash
npm install -g @ncukondo/pubmed-mcp
```

### Step 2: Configure PubMed MCP in Claude

#### Option A: Using Claude CLI (Recommended)
```bash
# Remove any existing PubMed configuration
claude mcp remove pubmed

# Add PubMed with your credentials
claude mcp add-json pubmed '{
  "command": "npx",
  "args": ["@ncukondo/pubmed-mcp"],
  "env": {
    "PUBMED_EMAIL": "your.email@university.edu",
    "PUBMED_API_KEY": "your-optional-api-key"
  }
}'
```

#### Option B: Manual Configuration
Add to your `~/.claude.json` or cloud-synced config:
```json
{
  "mcpServers": {
    "pubmed": {
      "command": "npx",
      "args": ["@ncukondo/pubmed-mcp"],
      "env": {
        "PUBMED_EMAIL": "your.email@university.edu",
        "PUBMED_API_KEY": "your-optional-api-key"
      }
    }
  }
}
```

### Step 3: Verify Installation
```bash
# Check MCP servers status
claude mcp list

# Should show:
# pubmed: npx @ncukondo/pubmed-mcp - ✓ Connected
```

## Configuration Requirements

### Required: Email Address
- **Purpose**: NCBI requires an email for API usage tracking
- **Format**: Any valid email address
- **Example**: `"PUBMED_EMAIL": "researcher@university.edu"`

### Optional: API Key
- **Purpose**: Increases rate limits from 3 to 10 requests/second
- **Get one**: https://www.ncbi.nlm.nih.gov/account/settings/
- **Benefits**:
  - Higher rate limits for intensive research
  - Priority access during peak times
  - Better for systematic reviews and meta-analyses

## Troubleshooting

### Common Issues

#### 1. "PUBMED_EMAIL environment variable required"
**Solution**: Email not configured. Follow Step 2 above.

#### 2. "Failed to connect" in MCP list
**Possible causes**:
- Missing npm package → Run `npm install -g @ncukondo/pubmed-mcp`
- Malformed JSON config → Check for proper quotes and commas
- Missing email → Ensure PUBMED_EMAIL is set

#### 3. "Rate limit exceeded"
**Solution**: Add API key or reduce query frequency
```json
"PUBMED_API_KEY": "your-api-key-here"
```

#### 4. PubMed MCP not appearing in `/mcp` list
**Solution**: Restart Claude Code after configuration
```bash
claude restart
# or
exit
claude
```

## Usage Examples

Once configured, the agent can:

### Basic Literature Search
```
/agent Search PubMed for recent papers on HLA antibody detection methods
```

### PMID Verification
```
/agent Verify PMID 35730681 and summarize the findings
```

### Systematic Search with Date Filters
```
/agent Find all papers from 2020-2024 about prozone effect in HLA testing
```

### Citation Management
```
/agent Create a reference list for kidney transplant DSA monitoring papers
```

## Integration with Research Workflow

The PubMed MCP integrates seamlessly with:

1. **Memory MCP**: Stores validated findings with PMIDs
2. **Obsidian REST**: Creates literature notes with proper citations
3. **Sequential Thinking**: Analyzes conflicting evidence from multiple papers
4. **Filesystem**: Reads local PDFs to compare with PubMed data

## Best Practices

1. **Always verify claims**: Use PubMed to confirm scientific statements
2. **Store PMIDs**: Include PMID references in all research notes
3. **Date filtering**: Focus on recent papers (last 5 years) unless historical context needed
4. **API key**: Get one for any serious research work
5. **Batch queries**: Group related searches to minimize API calls

## Advanced Configuration

### Cache Settings (Optional)
```json
"env": {
  "PUBMED_EMAIL": "your.email@edu",
  "PUBMED_API_KEY": "your-key",
  "PUBMED_CACHE_DIR": "~/Library/Caches/pubmed",
  "PUBMED_CACHE_TTL": "86400"  // 24 hours in seconds
}
```

### Custom Query Parameters
The PubMed MCP supports:
- Date ranges: `(2020/01/01:2024/12/31[pdat])`
- Author searches: `Smith J[Author]`
- Journal filters: `Nature[Journal]`
- MeSH terms: `"Kidney Transplantation"[MeSH]`

## Security Notes

- **Email**: Used only for NCBI tracking, not exposed publicly
- **API Key**: Keep secure, don't commit to version control
- **Cache**: Local only, no cloud sync of cached queries
- **Rate Limiting**: Automatic throttling prevents account issues

## Support Resources

- **NCBI Account**: https://www.ncbi.nlm.nih.gov/account/
- **PubMed Help**: https://pubmed.ncbi.nlm.nih.gov/help/
- **API Documentation**: https://www.ncbi.nlm.nih.gov/books/NBK25501/
- **MCP Issues**: https://github.com/ncukondo/pubmed-mcp/issues

---

*Last updated: 2025-01-20*
*Compatible with: @ncukondo/pubmed-mcp v1.0+*